@using CaloriesCatcher.UI.Service.IService;
@using CaloriesCatcher.UI.Service
<AuthorizeView>
    <Authorized>
        <MudNavMenu>
            <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.SpaceDashboard">Dashboard</MudNavLink>
            <MudNavLink Href="/nutrition" Icon="@Icons.Material.Filled.FoodBank" Match="NavLinkMatch.All">Nutrition</MudNavLink>
            <MudNavLink Href="/about" Icon="@Icons.Material.Filled.Fastfood" Match="NavLinkMatch.All">Recipe</MudNavLink>
            <MudNavGroup Title="User" Expanded="true" Icon="@Icons.Material.Filled.SupervisedUserCircle">
                <MudNavLink Href="/profile" Icon="@Icons.Material.Outlined.VerifiedUser" Match="NavLinkMatch.Prefix">
                    Profile
                </MudNavLink>
                <MudNavLink OnClick="Logout" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Logout">Logout</MudNavLink>
            </MudNavGroup>
        </MudNavMenu>
    </Authorized>
</AuthorizeView>


@code {
    [Inject]private NavigationManager navigationManager { get; set; } = default!;
    [Inject]AuthenticationStateProvider authenticationStateProvider { get; set; } = default!;
    private async Task Logout()
    {
        var customAuthenticationStateProvider = (CustomAuthenticationStateProvider)authenticationStateProvider;
        await customAuthenticationStateProvider.UpdateAuthenticationState(null);
        navigationManager.NavigateTo("/", true);
    }
}